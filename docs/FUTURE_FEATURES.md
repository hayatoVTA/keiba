# 将来実装予定機能（ゲーミフィケーション）

## 概要

MVPリリース後、製品版で実装予定のゲーミフィケーション機能です。これらの機能により、ユーザーのエンゲージメント向上とリテンション率の改善を目指します。

## 1. レベル機能

### 1.1 概要

ユーザーが予想をしたり、的中させたりすることで経験値を獲得し、レベルアップできるシステムです。

### 1.2 経験値獲得方法

| アクション | 経験値 |
|----------|--------|
| 予想を1回する | 10 EXP |
| 予想が的中する | 50 EXP |
| 大配当（100倍以上）で的中 | 200 EXP |
| 連続的中（3回連続） | 100 EXP |
| デイリーログイン | 20 EXP |
| ランキング上位入賞 | 100-500 EXP |
| バッジ獲得 | 50-200 EXP |

### 1.3 レベルシステム

#### レベル範囲
- **レベル1-10**: 初心者（各レベル: 100 EXP）
- **レベル11-25**: 中級者（各レベル: 200 EXP）
- **レベル26-50**: 上級者（各レベル: 300 EXP）
- **レベル51-100**: エキスパート（各レベル: 500 EXP）
- **レベル101以上**: マスター（各レベル: 1000 EXP）

#### レベルアップ特典

**レベル5到達**
- コイン 1,000コイン
- 限定アバター「初心者」

**レベル10到達**
- コイン 5,000コイン
- 予想上限: 10,000 → 15,000コイン
- 限定バッジ「レベル10達成」

**レベル25到達**
- コイン 10,000コイン
- 予想上限: 15,000 → 20,000コイン
- 限定アバター「中級者」
- プレミアム機能の一部無料化（詳細分析 月5回まで）

**レベル50到達**
- コイン 50,000コイン
- 予想上限: 20,000 → 30,000コイン
- 限定バッジ「レベル50達成」
- プレミアム機能の一部無料化（詳細分析 月10回まで）

**レベル100到達**
- コイン 100,000コイン
- 予想上限: 30,000 → 50,000コイン
- 限定アバター「マスター」
- プレミアム機能の一部無料化（詳細分析 無制限）

### 1.4 データ構造

```typescript
interface UserLevel {
  userId: string;
  level: number;
  currentExp: number;
  totalExp: number;
  expToNextLevel: number;
  levelUpRewards: LevelReward[];
}

interface LevelReward {
  level: number;
  coins: number;
  items: string[]; // バッジ、アバター等
  benefits: string[]; // 特典の説明
}
```

### 1.5 UI表示

- **プロフィールページ**: レベル、経験値バー、次のレベルまでの経験値
- **予想画面**: 経験値獲得の通知
- **レベルアップ時**: 特別なアニメーションと報酬表示

## 2. クラブ機能

### 2.1 概要

ユーザーがクラブを作成・参加し、クラブ単位でランキングやミッションに挑戦できる機能です。

### 2.2 クラブの基本機能

#### クラブ作成
- **作成条件**: レベル10以上、コイン10,000コイン
- **クラブ名**: 最大20文字
- **クラブ説明**: 最大200文字
- **クラブアイコン**: 選択可能
- **最大メンバー数**:
  - 初期: 10人
  - レベルアップで増加（最大50人）

#### クラブ参加
- **参加条件**: レベル5以上
- **参加方法**:
  - 招待コードで参加
  - 公開クラブ一覧から申請
- **同時所属**: 1ユーザーは1クラブのみ

#### クラブ管理
- **クラブマスター**: クラブ作成者
- **副マスター**: クラブマスターが任命（最大3人）
- **権限**:
  - メンバーの承認・削除
  - クラブ設定の変更
  - ミッションの設定

### 2.3 クラブランキング

#### ランキング種類
1. **クラブ総資産ランキング**: クラブメンバーの総コイン合計
2. **クラブ収支ランキング**: クラブメンバーの総収支合計
3. **クラブ的中率ランキング**: クラブメンバーの平均的中率
4. **クラブ活動ランキング**: クラブメンバーの総予想数

#### ランキング報酬
- **1位**: クラブ全員に50,000コイン + ゴールドクラブバッジ
- **2-3位**: クラブ全員に30,000コイン + シルバークラブバッジ
- **4-10位**: クラブ全員に10,000コイン + ブロンズクラブバッジ

### 2.4 クラブミッション

#### ミッション種類
- **予想数ミッション**: クラブ全体で一定数の予想を達成
- **的中数ミッション**: クラブ全体で一定数の的中を達成
- **収支ミッション**: クラブ全体で一定の収支を達成
- **ランキングミッション**: クラブランキングで一定順位以上を達成

#### ミッション報酬
- ミッション達成時にクラブ全員に報酬
- 報酬: コイン、経験値、限定バッジ

### 2.5 クラブチャット

- **チャット機能**: クラブメンバー同士でメッセージ交換
- **予想共有**: クラブ内で予想を共有
- **結果報告**: 的中した予想を報告

### 2.6 データ構造

```typescript
interface Club {
  id: string;
  name: string;
  description: string;
  icon: string;
  masterId: string;
  subMasters: string[];
  members: ClubMember[];
  level: number;
  exp: number;
  totalAssets: number;
  totalProfit: number;
  averageWinRate: number;
  createdAt: Date;
}

interface ClubMember {
  userId: string;
  role: 'master' | 'subMaster' | 'member';
  joinedAt: Date;
  contribution: number; // クラブへの貢献度
}

interface ClubMission {
  id: string;
  clubId: string;
  type: 'bets' | 'wins' | 'profit' | 'ranking';
  target: number;
  current: number;
  reward: {
    coins: number;
    exp: number;
    badge?: string;
  };
  status: 'active' | 'completed' | 'expired';
  deadline: Date;
}
```

## 3. シーズン報酬機能

### 3.1 概要

一定期間（シーズン）ごとにランキングをリセットし、シーズン終了時に成績に応じて報酬を配布するシステムです。

### 3.2 シーズンシステム

#### シーズン期間
- **1シーズン**: 3ヶ月（四半期ごと）
- **シーズン開始**: 1月、4月、7月、10月の1日
- **シーズン終了**: 3月、6月、9月、12月の最終日

#### シーズンランキング
- **シーズン総資産ランキング**: シーズン中のコイン増加量
- **シーズン収支ランキング**: シーズン中の収支
- **シーズン的中率ランキング**: シーズン中の的中率
- **シーズン予想数ランキング**: シーズン中の予想数

### 3.3 シーズン報酬

#### 報酬テーブル

| 順位 | 報酬 |
|------|------|
| 🥇 1位 | 500,000コイン + シーズンゴールドバッジ + 限定アバター |
| 🥈 2-3位 | 300,000コイン + シーズンシルバーバッジ + 限定アバター |
| 🥉 4-10位 | 100,000コイン + シーズンブロンズバッジ |
| 11-50位 | 50,000コイン + シーズン参加バッジ |
| 51-100位 | 20,000コイン + シーズン参加バッジ |
| 101-500位 | 10,000コイン |
| 501-1000位 | 5,000コイン |
| 1001位以上 | 1,000コイン |

#### 参加報酬
- シーズン中に1回以上予想した全ユーザーに参加報酬
- 報酬: 1,000コイン + シーズン参加バッジ

### 3.4 シーズンリセット

#### リセット内容
- **ランキング**: すべてのランキングをリセット
- **コイン**: リセットしない（保持）
- **レベル**: リセットしない（保持）
- **バッジ**: リセットしない（保持）
- **予想履歴**: リセットしない（保持）

#### リセット後の特典
- 新シーズン開始時に全ユーザーにボーナスコイン
- 前シーズンの成績に応じたボーナス

### 3.5 シーズンバッジ

#### バッジ種類
- **シーズンゴールドバッジ**: シーズン1位
- **シーズンシルバーバッジ**: シーズン2-3位
- **シーズンブロンズバッジ**: シーズン4-10位
- **シーズン参加バッジ**: シーズン中に予想した全ユーザー
- **シーズン限定バッジ**: シーズンごとの特別バッジ

### 3.6 データ構造

```typescript
interface Season {
  id: string;
  number: number; // シーズン番号
  name: string; // 例: "2024年春シーズン"
  startDate: Date;
  endDate: Date;
  status: 'upcoming' | 'active' | 'ended';
}

interface SeasonRanking {
  seasonId: string;
  userId: string;
  totalAssets: number;
  netProfit: number;
  winRate: number;
  totalBets: number;
  rank: number;
  reward: {
    coins: number;
    badges: string[];
    avatar?: string;
  };
}
```

## 4. 実装優先順位

### Phase 1（製品版リリース後3ヶ月）
1. **レベル機能**: 基本的なレベルシステム
2. **シーズン報酬機能**: 基本的なシーズンシステム

### Phase 2（製品版リリース後6ヶ月）
3. **クラブ機能**: 基本的なクラブ機能
4. **レベル機能拡張**: より詳細な特典システム

### Phase 3（製品版リリース後9ヶ月）
5. **クラブ機能拡張**: クラブミッション、チャット
6. **シーズン機能拡張**: より詳細な報酬システム

## 5. 期待される効果

### エンゲージメント向上
- **レベル機能**: 継続的な目標設定により、毎日のログインを促進
- **クラブ機能**: ソーシャル要素により、コミュニティ形成
- **シーズン報酬**: 定期的なリセットにより、新たな挑戦を促進

### リテンション率向上
- **長期的な目標**: レベルアップ、クラブランクアップなどの長期目標
- **定期的な報酬**: シーズン報酬により、定期的なリターン
- **コミュニティ**: クラブ機能により、ユーザー同士のつながり

### 収益向上
- **コイン消費**: レベルアップ特典により、コイン消費を促進
- **課金促進**: クラブやシーズン報酬により、課金意欲を向上
- **リテンション**: 長期的なエンゲージメントにより、LTV向上

